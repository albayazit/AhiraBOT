import requests
from datetime import datetime

cities_data = {
	'–ù“±—Ä-–°“±–ª—Ç–∞–Ω': '51.133333/71.433333', 
	'–ê–ª–º–∞—Ç—ã': '43.238293/76.945465', 
	'–®—ã–º–∫–µ–Ω—Ç': '42.3/69.6', 
	'–ê—Ä–∞–ª': '46.8/61.666667', 
	'–ë–∞–π“õ–æ–Ω—ã—Ä': '45.966111/63.307778', 
	'–ñ—ñ—Ç—ñ“õ–∞—Ä–∞ –∞—É–¥–∞–Ω—ã ': '51.937054/61.012478', 
	'“∞–∑—ã–Ω–∫”©–ª –∞—É–¥–∞–Ω—ã ': '54.162521/65.474446', 
	'–î–µ–Ω–∏—Å –∞—É–¥–∞–Ω—ã': '52.603040/61.620629', 
	'–õ–∏—Å–∞–∫–æ–≤': '52.544079/62.492641', 
	'–ñ”ô–Ω—ñ–±–µ–∫': '49.416667/46.85', 
	'–ñ–∞—Ä–∫–µ–Ω—Ç': '44.166667/80.00', 
	'“ö—ã–∑—ã–ª–æ—Ä–¥–∞': '44.85/65.516667', 
	'–ê“õ—Å–∞–π': '51.10/52.59', 
	'–ß–∞–ø–∞–µ–≤': '50.182778/51.175278', 
	'–ñ–∞“£“õ–∞–ª–∞': '49.215139/50.303028', 
	'–ë–µ–π–Ω–µ—É': '45.322946/55.188862', 
	'–ê“õ—Ç”©–±–µ': '50.3/57.166667', 
	'“ö–∞–Ω–¥—ã–∞“ì–∞—à': '49.474444/57.423333', 
	'–•—Ä–æ–º—Ç–∞—É': '50.250278/58.434722', 
	'–®–∞–ª“õ–∞—Ä': '47.831392/59.619290', 
	'“ö–∞–ø—à–∞“ì–∞–π': '43.883333/77.083333', 
	'–¢–∞–ª–¥—ã“õ–æ—Ä“ì–∞–Ω': '45.016667/78.366667', 
	'–¢–∞—Ä–∞–Ω –∞—É–¥–∞–Ω—ã': '52.539620/62.771083', 
	'–ê–º–∞–Ω–≥–µ–ª–¥—ñ –∞—É–¥–∞–Ω—ã': '49.940951/65.461268', 
	'–§–µ–¥–µ—Ä–æ–≤ –∞—É–¥–∞–Ω—ã': '53.692845/62.851689', 
	'–ñ–∞–Ω–≥–µ–ª–¥—ñ –∞—É–¥–∞–Ω—ã': '49.699308/63.631067', 
	'“ö–∞—Ä–∞—Å—É –∞—É–¥–∞–Ω—ã': '52.341344/65.392026', 
	'–ú–µ“£–¥—ñ“õ–∞—Ä–∞ –∞—É–¥–∞–Ω—ã': '53.933550/64.299378', 
	'–ù–∞—É—ã—Ä–∑—ã–º  –∞—É–¥–∞–Ω—ã ': '51.304292/63.628399',
	'–°–∞—Ä—ã–∫”©–ª –∞—É–¥–∞–Ω—ã': '53.440801/65.685604',
	'”ò—É–ª–∏–µ–∫”©–ª –∞—É–¥–∞–Ω—ã': '52.224572/63.920163',
	'–ö”©–∫—à–µ—Ç–∞—É': '53.291667/69.391667', 
	'–°–∞—Ä—ã”©–∑–µ–∫': '44.356667/77.969167', 
	'–°—Ç–µ–ø–Ω–æ–≥–æ—Ä—Å–∫': '52.346944/71.881667', 
	'“Æ—à–∞—Ä–∞–ª': '46.169722/80.939444', 
	'–ê—Ç–±–∞—Å–∞—Ä': '51.816667/68.35', 
	'–ê—è–≥”©–∑': '47.966667/80.433333', 
	'”®—Å–∫–µ–º–µ–Ω': '49.95/82.616667', 
	'–†–∏–¥–¥–µ—Ä': '50.35/83.516667', 
	'–°–µ–º–µ–π': '50.411111/80.2275', 
	'–ñ–∞“£–∞—Ç–∞—Å': '43.566667/69.75', 
	'“ö–∞—Ä–∞—Ç–∞—É': '43.166667/70.466667', 
	'–¢–∞—Ä–∞–∑': '42.883333/71.366667', 
	'–ë–∞–ª“õ–∞—à': '46.5408/74.8789', 
	'–ñ”ô–π—Ä–µ–º': '48.3375/70.169167', 
	'–ñ–µ–∑“õ–∞–∑“ì–∞–Ω': '47.783333/67.7', 
	'–°”ô—Ç–ø–∞–µ–≤': '47.9/67.533333', 
	'“ö–∞—Ä–∞“ì–∞–Ω–¥—ã': '49.806406/73.085485', 
	'–ê—Ä“õ–∞–ª—ã“õ': '50.248611/66.911389', 
	'“ö–æ—Å—Ç–∞–Ω–∞–π': '53.219333/63.634194', 
	'–†—É–¥–Ω—ã–π': '52.966667/63.116667', 
	'–ü–µ—Ç—Ä–æ–ø–∞–≤–ª': '54.862222/69.140833', 
	'–ï–∫—ñ–±–∞—Å—Ç“±–∑': '51.729778/75.326583', 
	'–ü–∞–≤–ª–æ–¥–∞—Ä': '52.315556/76.956389', 
	'”ò–π—Ç–µ–∫–µ –±–∏ –∫–µ–Ω—Ç—ñ': '45.835934/62.148317', 
	'–ñ–µ—Ç—ñ—Å–∞–π': '40.775278/68.327222', 
	'–°–∞—Ä—ã–∞“ì–∞—à': '41.466667/69.166667', 
	'–®–∞—Ä–¥–∞—Ä–∞': '41.254722/67.969167', 
	'–ú–∏—è–ª—ã': '48.47/53.47', 
	'–ê—Ç—ã—Ä–∞—É': '47.116667/51.883333',
	'–ú–∞“õ–∞—Ç': '47.65/53.316667',
	'“ö“±–ª—Å–∞—Ä—ã': '46.983333/54.016667',
	'–ê“õ—Ç–∞—É': '43.635379/51.169135',
	'–ñ–∞“£–∞”©–∑–µ–Ω': '43.343266/52.865792',
	'–§–æ—Ä—Ç-–®–µ–≤—á–µ–Ω–∫–æ': '44.507463/50.262833',
	'–°–∞–π“õ—ã–Ω': '48.815278/46.766944', 
	'–û—Ä–∞–ª': '51.204019/51.370537', 
	'–¢“Ø—Ä–∫—ñ—Å—Ç–∞–Ω': '43.3/68.243611', 
	'“ö–∞—Ä–∞–±–∞–ª—ã“õ –∞—É–¥–∞–Ω—ã': '53.599507/61.769785', 
	'“ö–∞–º—ã—Å—Ç—ã –∞—É–¥–∞–Ω—ã': '51.549566/62.301561', 
	'–ê–ª—Ç—ã–Ω—Å–∞—Ä–∏–Ω –∞—É–¥–∞–Ω—ã': '53.104086/64.589965', 
	'“∞–∑—ã–Ω–∞“ì–∞—à': '43.220905/76.314192', 
	'–¢–∞–ª“ì–∞—Ä': '43.302813/77.239690', 
	'“ö–∞—Å–∫–µ–ª–µ“£': '43.202449/76.622278', 
	'–®“±–±–∞—Ä“õ“±–¥—ã“õ': '49.202977/56.563994', 
	'–®—É': '43.611782/73.760237', 
	'“ö–æ—Ä–¥–∞–π': '43.046040/74.708076', 
	'“ö–∞—Ä–∞–∂–∞–ª': '48.001042/70.785762', 
	'–ê—Ç–∞—Å—É –∞—É—ã–ª—ã': '48.500979/71.078065', 
	'–ö–µ–ª–µ—Å –∞—É–¥–∞–Ω—ã': '41.305597/68.544861', 
	'–õ–µ–Ω–≥–µ—Ä': '42.182051/69.882120', 
	'–û—Ç—ã—Ä–∞—Ä –∞—É–¥–∞–Ω—ã': '42.666225/67.497308', 
	'–°–∞–π—Ä–∞–º –∞—É–¥–∞–Ω—ã': '42.403930/69.875266', 
	'–°–æ–∑–∞“õ –∞—É–¥–∞–Ω—ã': '44.861720/68.569600', 
	'–¢“Ø–ª–∫—ñ–±–∞—Å –∫–µ–Ω—Ç—ñ': '42.493477/70.290737', 
	'“ö–∞—Ä“ì–∞–ª—ã': '50.783970/58.106976', 
	'–û–π—ã–ª –∞—É–¥–∞–Ω—ã': '49.260606/54.575097', 
	'–´—Ä“ì—ã–∑ –∞—É–¥–∞–Ω—ã': '48.481065/62.151353', 
	'–ë–∞–π“ì–∞–Ω–∏–Ω –∞—É–¥–∞–Ω—ã': '47.436554/56.526355', 
	'“ö–æ–±–¥–∞ –∞—É–¥–∞–Ω—ã': '50.188476/55.325909',
	'–ú”ô—Ä—Ç”©–∫ –∞—É–¥–∞–Ω—ã': '50.711441/56.733892',
	'–ï–º–±—ñ': '48.823344/58.148397', 
	'–®–∏–µ–ª—ñ –∫–µ–Ω—Ç—ñ': '44.177802/66.731387', 
	'–ó–∞–π—Å–∞–Ω': '47.453008/84.969846', 
	'–®–∞–ª –∞“õ—ã–Ω –∞—É–¥–∞–Ω—ã': '53.785566/67.379494', 
	'–ï“£–±–µ–∫—à—ñ“õ–∞–∑–∞“õ': '43.500438/78.163706', 
	'–ò–Ω–¥–µ—Ä': '48.299901/51.398492', 
	'–ñ–æ—Å–∞–ª—ã': '45.488489/64.086666', 
	'–ö–µ–Ω—Ç–∞—É': '43.518131/68.504652', 
	'“ö–∞–∑—ã“ì“±—Ä—Ç': '41.862652/69.579316', 
	'–®–∞–º–∞–ª“ì–∞–Ω –∞—É—ã–ª—ã': '43.189863/76.534549', 
	'–¢–∞–π—ã–Ω—à–∞': '53.852738/69.782631', 
	'–ñ–µ–∑–¥—ñ –∫–µ–Ω—Ç—ñ': '48.058857/67.054870', 
	'–°—ã—Ä—ã–º –∞—É–¥–∞–Ω—ã': '50.325986/52.678107', 
	'–ñ–∞–ª–∞“ì–∞—à –∫–µ–Ω—Ç—ñ': '45.080281/64.681333', 
	'–¢–µ—Ä–µ“£”©–∑–µ–∫ –∫–µ–Ω—Ç—ñ': '45.053372/64.985412', 
	'–ñ–∞“£–∞“õ–æ—Ä“ì–∞–Ω –∫–µ–Ω—Ç—ñ': '43.900451/67.243723', 
	'–¢–µ–º—ñ—Ä—Ç–∞—É': '50.058756/72.953424', 
	'–ê–ª“ì–∞': '50.076944/58.284444', 
	'–ê“õ—Å—É': '52.037890/76.920582', 
	'–ú–∞–π –∞—É–¥–∞–Ω—ã': '51.030109/77.498594', 
	'–®–∞—Ä–±–∞“õ—Ç—ã –∞—É–¥–∞–Ω—ã': '52.335401/78.302622', 
	'–ï—Ä—Ç—ñ—Å –∞—É–¥–∞–Ω—ã': '53.295153/74.586606', 
	'–ê“õ—Ç–æ“ì–∞–π –∞—É–¥–∞–Ω—ã': '52.732339/75.222892', 
	'–¢–µ—Ä–µ“£–∫”©–ª –∞—É–¥–∞–Ω—ã': '53.227323/76.483156', 
	'–ë–∞—è–Ω–∞—É—ã–ª –∞—É–¥–∞–Ω—ã': '50.803357/75.489287', 
	'–ê“õ“õ—É–ª—ã –∞—É–¥–∞–Ω—ã': '51.508573/78.303592', 
	'–°–æ–ª–Ω–µ—á–Ω—ã–π': '52.034976/75.462284', 
	'–ú–∞–π“õ–∞–π—ã–Ω –∫–µ–Ω—Ç—ñ': '51.458711/75.796313', 
	'–®–∞—è–Ω': '43.032169/69.381210',
	'”ò–π—Ç–µ–∫–µ –±–∏ –∞—É–¥–∞–Ω—ã': '49.99/60.87',
	'–¶–µ–ª–∏–Ω–æ–≥—Ä–∞–¥ –∞—É–¥–∞–Ω—ã': '51.028562/70.990677', 
	'“∞—Ä–∂–∞—Ä –∞—É–¥–∞–Ω—ã': '46.974805/81.462482', 
	'–ö”©–∫–ø–µ–∫—Ç—ñ –∞—É–¥–∞–Ω—ã': '48.687009/82.892842', 
	'–ö—É—Ä—á–∞—Ç–æ–≤': '50.754900/78.544826', 
	'–ò—Å–∞—Ç–∞–π –∞—É–¥–∞–Ω—ã': '47.381847/50.381465', 
	'“ö“±—Ä–º–∞–Ω“ì–∞–∑—ã –∞—É–¥–∞–Ω—ã': '47.140203/49.266377', 
	'–ú–∞—Ö–∞–Ω–±–µ—Ç –∞—É–¥–∞–Ω—ã': '47.633313/51.763577', 
	'–ñ–æ—Å–∞–ª—ã –∫–µ–Ω—Ç—ñ': '45.488495/64.086675', 
	'–ë”ô–π–¥—ñ–±–µ–∫ –∞—É–¥–∞–Ω—ã': '43.027233/69.485514', 
	'–ê—Ä—ã—Å “õ–∞–ª–∞—Å—ã': '42.432744/68.813798', 
	'–ú—ã—Ä–∑–∞–∫–µ–Ω—Ç –∫–µ–Ω—Ç—ñ': '40.666728/68.544933', 
	'–¢–µ“£—ñ–∑ –∫–µ–Ω –æ—Ä–Ω—ã': '46.079223/53.387326', 
	'“ö–æ—Å—à—ã': '50.970262/71.355366', 
	'–û–π—ã–ª –∞—É–¥–∞–Ω—ã': '49.260612/54.575097'
	}
cities = list(cities_data.keys())

async def get_day_time(address):
	year = datetime.today().year
	day = datetime.today().strftime('%j')
	today = datetime.today().day
	url = f"https://api.muftyat.kz/prayer-times/{year}/{cities_data[address]}?format=json"
	response = requests.request("GET", url).json()
	data = response['result'][int(day)-1]
	date = datetime.fromisoformat(data['Date'])
	daytime_message = (
				f'üåç –ì–æ—Ä–æ–¥: <b>{address}</b>\n\n'
				f'üìÖ –î–∞—Ç–∞: <b>{date.strftime("%d.%m.%Y")}</b>\n\n'
				f'üî≠ –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞: <b> –î–£–ú –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</b>\n\n'

				f'<b>–§–∞–¥–∂—Ä - {data["fajr"]}</b>\n'
				f'<b>–ó—É—Ö—Ä - {data["dhuhr"]}</b>\n'
				f'<b>–ê—Å—Ä - {data["asr"]}</b>\n'
				f'<b>–ú–∞–≥—Ä–∏–± - {data["maghrib"]}</b>\n'
				f'<b>–ò—à–∞ - {data["isha"]}</b>\n\n'
				
				f'–†–∞—Å—Å–≤–µ—Ç: <b>{data["sunrise"]}</b>\n'
				f'–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–æ—á–∏: <b>{data["midnight"]}</b>\n'
		)
	return daytime_message

async def get_tomorrow_time(address):
	year = datetime.today().year
	day = datetime.today().strftime('%j')
	today = datetime.today().day
	url = f"https://api.muftyat.kz/prayer-times/{year}/{cities_data[address]}?format=json"
	next_year = int(year) + 1
	response = requests.request("GET", url).json()
	try:
		data = response['result'][int(day)]
	except:
		url = f"https://api.muftyat.kz/prayer-times/{next_year}/{cities_data[address]}?format=json"
		response = requests.request("GET", url).json()
		data = response['result'][0]
	date = datetime.fromisoformat(data['Date'])
	daytime_message = (
				f'üåç –ì–æ—Ä–æ–¥: <b>{address}</b>\n\n'
				f'üìÖ –î–∞—Ç–∞: <b>{date.strftime("%d.%m.%Y")}</b>\n\n'
				f'üî≠ –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞: <b> –î–£–ú –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</b>\n\n'

				f'<b>–§–∞–¥–∂—Ä - {data["fajr"]}</b>\n'
				f'<b>–ó—É—Ö—Ä - {data["dhuhr"]}</b>\n'
				f'<b>–ê—Å—Ä - {data["asr"]}</b>\n'
				f'<b>–ú–∞–≥—Ä–∏–± - {data["maghrib"]}</b>\n'
				f'<b>–ò—à–∞ - {data["isha"]}</b>\n\n'
				
				f'–†–∞—Å—Å–≤–µ—Ç: <b>{data["sunrise"]}</b>\n'
				f'–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–æ—á–∏: <b>{data["midnight"]}</b>\n'
		)
	return daytime_message

async def get_month_time(address, period):
	year = datetime.today().year
	day = datetime.today().strftime('%j')
	today = datetime.today().day
	current = int(day) - int(today)
	current_day = current + int(period) - 1
	url = f"https://api.muftyat.kz/prayer-times/{year}/{cities_data[address]}?format=json"	
	response = requests.request("GET", url).json()
	data = response['result'][current_day]
	date = datetime.fromisoformat(data['Date'])
	daytime_message = (
				f'üåç –ì–æ—Ä–æ–¥: <b>{address}</b>\n\n'
				f'üìÖ –î–∞—Ç–∞: <b>{date.strftime("%d.%m.%Y")}</b>\n\n'
				f'üî≠ –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞: <b> –î–£–ú –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</b>\n\n'

				f'<b>–§–∞–¥–∂—Ä - {data["fajr"]}</b>\n'
				f'<b>–ó—É—Ö—Ä - {data["dhuhr"]}</b>\n'
				f'<b>–ê—Å—Ä - {data["asr"]}</b>\n'
				f'<b>–ú–∞–≥—Ä–∏–± - {data["maghrib"]}</b>\n'
				f'<b>–ò—à–∞ - {data["isha"]}</b>\n\n'
				
				f'–†–∞—Å—Å–≤–µ—Ç: <b>{data["sunrise"]}</b>\n'
				f'–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–æ—á–∏: <b>{data["midnight"]}</b>\n'
		)
	return daytime_message